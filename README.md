# TRobot API для онлайн курсов по веб-программированию

Добро пожаловать в документацию по API TRobot для онлайн курсов по веб-программированию. Это API предоставляет доступ к курсам, пользователям, покупкам и другим функциям, необходимым для управления онлайн-платформой курсов.

## Оглавление

1. [Аутентификация](#аутентификация)
2. [Пользователи](#пользователи)
3. [Курсы](#курсы)
4. [Покупки](#покупки)

## Аутентификация

Для использования большинства эндпоинтов API требуется аутентификация с помощью токена доступа. В качестве метода аутентификации используется Bearer токен.

### Регистрация пользователя

```
POST /user/registration
```

Регистрирует нового пользователя.

#### Пример тела запроса

```json
{
  "username": "example_user",
  "email": "example@example.com",
  "password": "example_password"
}
```

#### Пример ответа

```json
{
  "id": "1",
  "login": "example_user",
  "email": "example@example.com",
  "role": "USER"
}
```

### Авторизация пользователя

```
POST /user/login
```

Авторизует пользователя и возвращает токены доступа и обновления.

#### Пример тела запроса

```json
{
  "login": "example_user",
  "password": "example_password"
}
```

#### Пример ответа

```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "dGhpcyByZWZyZXNoIHRva2Vu..."
}
```

## Пользователи

### Получение информации о пользователе

```
GET /user/:id
```

Получает информацию о пользователе по его идентификатору. Требуется токен с ролью `ADMIN` или `USER` (если это текущий пользователь).

#### Параметры пути

- `id` - идентификатор пользователя.

#### Пример запроса

```http
GET /user/12345 HTTP/1.1
Host: api.example.com
Authorization: Bearer <токен>
```

#### Пример ответа

```json
{
  "id": "12345",
  "login": "example_user",
  "email": "example@example.com",
  "role": "USER"
}
```

### Обновление информации о пользователе

```
PATCH /user/:id
```

Обновляет информацию о пользователе. Требуется токен с ролью `ADMIN` или `USER` (если это текущий пользователь).

#### Параметры пути

- `id` - идентификатор пользователя.

#### Пример запроса

```http
PATCH /user/12345 HTTP/1.1
Host: api.example.com
Authorization: Bearer <токен>
Content-Type: application/json

{
  "email": "updated@example.com"
}
```

#### Пример ответа

```json
{
  "id": "12345",
  "login": "example_user",
  "email": "updated@example.com",
  "role": "USER"
}
```

## Курсы

### Получение списка всех курсов

```
GET /courses
```

Получает список всех доступных курсов. Доступен без аутентификации.

#### Пример ответа

```json
[
  {
    "id": "course1",
    "title": "Введение в веб-программирование",
    "description": "Основы веб-разработки с использованием HTML, CSS и JavaScript"
  },
  {
    "id": "course2",
    "title": "Продвинутый JavaScript",
    "description": "Глубокое погружение в мир JavaScript: асинхронное программирование, промисы, async/await и многое другое"
  }
]
```

### Получение информации о курсе

```
GET /courses/:id
```

Получает информацию о курсе по его идентификатору. Доступен без аутентификации.

#### Параметры пути

- `id` - идентификатор курса.

#### Пример ответа

```json
{
  "id": "course1",
  "title": "Введение в веб-программирование",
  "description": "Основы веб-разработки с использованием HTML, CSS и JavaScript",
  "duration": "6 weeks",
  "price": 50
}
```

### Создание курса

```
POST /courses
```

Создает новый курс. Требуется токен с ролью `ADMIN`.

```markdown
#### Пример тела запроса

```json
{
  "title": "Новый курс по Python",
  "description": "Основы программирования на языке Python",
  "duration": "8 weeks",
  "price": 100
}
```

#### Пример запроса

```http
POST /courses HTTP/1.1
Host: api.example.com
Authorization: Bearer <токен>
Content-Type: application/json

{
  "title": "Новый курс по Python",
  "description": "Основы программирования на языке Python",
  "duration": "8 weeks",
  "price": 100
}
```

#### Пример ответа

```json
{
  "id": "course3",
  "title": "Новый курс по Python",
  "description": "Основы программирования на языке Python",
  "duration": "8 weeks",
  "price": 100
}
```

### Покупка курса

```
POST /courses/purchase
```

Покупает выбранный курс для текущего пользователя. Требуется токен с ролью `USER`.

#### Пример тела запроса

```json
{
  "courseId": "course1"
}
```

#### Пример запроса

```http
POST /courses/purchase HTTP/1.1
Host: api.example.com
Authorization: Bearer <токен>
Content-Type: application/json

{
  "courseId": "course1"
}
```

#### Пример ответа

```json
{
  "id": "purchase1",
  "courseId": "course1",
  "userId": "12345",
  "createdAt": "2024-04-18T12:00:00Z"
}
```

## Покупки

### Получение списка всех покупок пользователя

```
GET /purchases
```

Получает список всех покупок текущего пользователя. Требуется токен с ролью `USER`.

#### Пример запроса

```http
GET /purchases HTTP/1.1
Host: api.example.com
Authorization: Bearer <токен>
```

#### Пример ответа

```json
[
  {
    "id": "purchase1",
    "courseId": "course1",
    "userId": "12345",
    "createdAt": "2024-04-18T12:00:00Z"
  },
  {
    "id": "purchase2",
    "courseId": "course2",
    "userId": "12345",
    "createdAt": "2024-04-19T09:30:00Z"
  }
]
```

## Примечание по безопасности

Для обеспечения безопасности данных все запросы, которые требуют аутентификации, должны содержать заголовок `Authorization: Bearer <токен>`. Токен можно получить после успешной авторизации пользователя.

Также важно помнить, что некоторые действия (например, создание и обновление курсов) доступны только для пользователей с ролью `ADMIN`. Убедитесь, что ваш токен содержит соответствующие права доступа для выполнения запрашиваемых операций.
```